# 函数
Kotlin天然支持了部分函数式特性。不仅可以像类一样在顶层直接定义函数，还可以在函数内部定义函数。  

## 高阶函数
以函数作为参数或者返回值的函数叫做高阶函数。那为什么Kotlin要引入高阶函数呢，主要有以下几个原因：  
1. 针对定义方，减少接口定义，提高性能。
2. 针对调用方，代码量减少，提高可读性。
### 函数类型
在Kotlin中，函数类型声明须遵循以下几点
1. 通过 ->符号来组织参数类型和返回值类型（左边是参数类型，右边是返回值类型）
2. 必须用一个括号来包裹参数
3. 返回值即使是Unit类型，也必须声明
```kotlin
//没有参数的函数
() -> Unit

//多个参数使用逗号分隔
(Int, String) -> Unit

//还可指定参数名
(name: String, age: Int) -> Unit

//可空类型
(name: String, age: Int?) -> Unit

//还可以把整个函数变成可选
((name: String, age: Int?) -> Unit)?

//返回另一个函数
(name: String, age: Int) -> ((Int) -> Unit)
//后半部省略之后
(name: String, age: Int) -> Int -> Unit

//参数是函数的函数
((Int) -> Int) -> Unit

//以下函数得类型就是，参数类型是两个Int，返回值是Float的函数类型。
//         (Int,  Int) ->Float 这就是 add 函数的类型
//           ↑     ↑      ↑
fun add(a: Int, b: Int): Float { return (a+b).toFloat() }
```
**函数不是表达式，不具有类型信息，它在带上括号、被执行之后才存在价值**
### 函数的引用
函数也有引用的概念，所以一个函数可以赋值给一个变量
```kotlin
// 函数赋值给变量                    函数引用
//    ↑                              ↑
val function: (Int, Int) -> Float = ::add
```
这是Kotlin中一种特殊的语法，通过两个冒号来实现对于某个类的方法进行引用，此外我们还可以直接通过这种语法来定义一个类的构造方法引用变量。
```kotlin
class Book(val name: String)

fun main(args: Array<String>) {
    //getBook类型为(name:String) -> Book
    val getBook = ::Book
    println(getBook("Dive into kotlin").name)
}
```

## 匿名函数
没有名字的函数
```kotlin
fun(name: String): Boolean {
    return name.isEmpty()
}
```

## Lambda表达式（语法糖）
简化表达后的匿名函数，本质是一种语法糖，以下是Lambda表达式语法
1. 必须通过{}包裹
2. 如果声明了参数部分类型，且返回值类型支持类型推导，那么Lambda变量就可以省略函数声明
3. 如果Lambda变量声明了函数类型，那么Lambda的参数部分的类型就可以省略
4. 如果Lambda表达式返回的不是Unit，那么默认最后一行表达式的类型就是其返回类型

以下是一个用Lambda的形式定义的一个加法操作
```kotlin
val sum: (Int,Int) -> Int = {x: Int, y: Init -> x + y}

//由于Kotlin支持类型推导，我们可以将其简化
val sum = {x: Int,y: Int -> x+y}
//或者
val sum = (Int,Int)-> Int = {x,y -> x + y}

```