# 协程
## 协程优势
- 比线程轻量，非阻塞
- 可以以同步的方式完成异步任务，解决可读性差、扩展性差、维护性差，极易出错的问题

## 协程启动方式
### lunch 启动协程
```kotlin
GlobalScope.launch{

}
```
GlobalScope.launch{}是一个高阶函数，他的作用是启动一个协程


## 挂起函数
挂起函数最神奇的地方，就在于它的挂起和恢复功能。从字面上看，suspend 这个词就是“挂起”的意思，而它既然能被挂起，自然就还可以被恢复。它们两个一般是成对出现的。

### 挂起函数分析
```kotlin
// delay(1000L)用于模拟网络请求
//挂起函数
// ↓
suspend fun getUserInfo(): String { 
    withContext(Dispatchers.IO) { delay(1000L) } 
    return "BoyCoder"
}

fun main() {

    val user = getUserInfo()
}
```
上面的程序 

- val user = getUserInfo()”，其中“=”左边的代码运行在主线程，而“=”右边的代码运行在 IO 线程
- 每一次从主线程到 IO 线程，都是一次协程挂起。
- 每一次从 IO 线程到主线程，都是一次协程恢复。
- 挂起和恢复，这是挂起函数特有的能力，普通函数是不具备的。
- 挂起，只是将程序执行流程转移到了其他线程，主线程不会被阻塞。 

### 深入理解 suspend
suspend，是 Kotlin 当中的一个关键字，它主要的作用是用于定义“挂起函数”,同样的一个函数，加上 suspend 修饰以后，它的函数类型就会发生改变。
```
“suspend (Int) -> Double”与“(Int) -> Double”并不能互相赋值
```
**挂起函数的本质，就是 Callback**

当 Kotlin 编译器检测到 suspend 关键字修饰的函数以后，就会自动将挂起函数转换成带有 CallBack 的函数,将挂起函数转换成带有CallBack的函数的这个过程叫CPS转换(Continuation-Passing-Style Transformation).

挂起和恢复，是协程的一种底层能力；而挂起函数，是这种底层能力的一种表现形式，通过暴露出来的 suspend 关键字，我们开发者可以在上层，非常方便地使用这种底层能力。

## Job

